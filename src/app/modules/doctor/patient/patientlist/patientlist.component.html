<!-- <ngx-spinner bdColor = "none"></ngx-spinner> -->
<div class="patient-list-page inner-scroll">
    <div class="section-header">
        <h2>Patient Records</h2>
        <h5 *ngIf="reportUrl" class="reportedIssue">
            <a href="{{ reportUrl }}"><b>Click here</b></a> to download the
            latest upload reports
        </h5>
        <div class="header-items">
            <button
                mat-stroked-button
                class="outline-btn"
                (click)="addPatient()"
                matTooltip="Add a Patient"
            >
                Add a Patient
            </button>
            <button
                mat-stroked-button
                class="outline-btn"
                matTooltip="Add Multiple Patient"
                (click)="openMultiplePatient()"
            >
                Add Multiple Patient
            </button>
            <input
                #fileInput
                type="file"
                id="file"
                (click)="fileInput.value = null"
                value=""
                (change)="handleFileInput($event.target.files)"
                accept=".xlsx"
            />
            <!-- <input type="file"
           id="file"
           (change)="handleFileInput($event.target.files)" accept=".xlsx"> -->
        </div>
    </div>
    <div *ngIf="Message" class="toast-container {{ MessageClass }}">
        <p>{{ Message }}</p>
    </div>
    <!-- <p class="{{MessageClass}}" ></p> -->
    <div class="section-filters">
        <div class="left-col">
            <div class="search-field">
                <mat-form-field>
                    <input
                        matInput
                        [ngModel]="search"
                        name="search"
                        (ngModelChange)="filterChange($event, 'search')"
                        placeholder="Enter a search item"
                    />
                    <mat-icon matSuffix>
                        <img src="../../../../assets/search.svg" alt="" />
                    </mat-icon>
                </mat-form-field>
            </div>
        </div>
        <div class="right-col">
            <button
                mat-button
                class="download-btn"
                matTooltip="Download List of Patients"
                (click)="exporttocsv()"
            >
                <img
                    matSuffix
                    src="../../../../../assets/download.svg"
                    alt=""
                />
                Download List of Patients
            </button>
            <button
                mat-button
                class="download-btn"
                matTooltip="Download all Patient Reports"
                (click)="recordsexporttocsv()"
            >
                <img
                    matSuffix
                    src="../../../../../assets/download.svg"
                    alt=""
                />
                Download all Patient Reports
            </button>
        </div>
    </div>
    <div class="table-container">
        <div class="table-filter">
            <mat-button-toggle-group
                class="tab-filter"
                [value]="requestParam.status"
            >
                <mat-button-toggle
                    (change)="filterChange($event.value, 'status')"
                    matTooltip="View All Patients"
                    [ngClass]="{
                        'mat-button-toggle-checked': requestParam.status === ''
                    }"
                    value=""
                    >All Patients ({{ this.systemTotal }})</mat-button-toggle
                >
                <mat-button-toggle
                    (change)="filterChange($event.value, 'status')"
                    [ngClass]="{
                        'mat-button-toggle-checked': requestParam.status === '1'
                    }"
                    matTooltip="View Active Patients"
                    value="active"
                    >Active ({{ this.active }})</mat-button-toggle
                >
                <mat-button-toggle
                    (change)="filterChange($event.value, 'status')"
                    [ngClass]="{
                        'mat-button-toggle-checked': requestParam.status === '2'
                    }"
                    matTooltip="View InActive Patients"
                    value="inactive"
                    >Inactive ({{ this.inactive }})</mat-button-toggle
                >
            </mat-button-toggle-group>
            <div class="select-filter-container">
                <mat-form-field style="width: 10rem">
                    <mat-label>Sort By</mat-label>
                    <mat-select
                        (selectionChange)="filterChange($event.value, 'type')"
                        [(value)]="selected"
                    >
                        <mat-option value="asc"> Oldest </mat-option>
                        <mat-option value="desc"> Newest </mat-option>
                    </mat-select>
                </mat-form-field>

                <mat-form-field style="width: 15.625rem">
                    <mat-label>Blood pressure (mmHg)</mat-label>

                    <mat-select
                        (selectionChange)="filterChange($event.value, 'bp')"
                    >
                        <mat-option value="5"> Avg of:5 readings </mat-option>
                        <mat-option value="10"> Avg of:10 readings </mat-option>
                        <mat-option value="15"> Avg of:15 readings </mat-option>
                        <mat-option value="20"> Avg of:20 readings </mat-option>
                        <!-- <mat-option value="Avg of 7 days"> Avg of:7 days </mat-option>
                        <mat-option value="Avg of 14 days"> Avg of:14 days </mat-option>
                        <mat-option value="Avg of 21 days"> Avg of:21 days </mat-option> -->
                    </mat-select>
                </mat-form-field>
                <!-- <mat-form-field style="width: 11.25rem">
                    <mat-label>Pulse (bpm)</mat-label>
                    <mat-select
                        (selectionChange)="filterChange($event.value, 'pulse')"
                    >
                        <mat-option value="5"> Avg of:5 readings </mat-option>
                        <mat-option value="10"> Avg of:10 readings </mat-option>
                        <mat-option value="15"> Avg of:15 readings </mat-option>
                        <mat-option value="20"> Avg of:20 readings </mat-option>
                    </mat-select>
                </mat-form-field> -->
            </div>
            <mat-button-toggle-group
                class="list-view-toggle"
                [value]="addClass"
            >
                <mat-button-toggle
                    matTooltip="Grid View"
                    (change)="listViewChange($event.value)"
                    value="grid-view"
                >
                    <img src="../../../../../assets/grid-icon.svg" alt="" />
                </mat-button-toggle>
                <mat-button-toggle
                    matTooltip="List View"
                    (change)="listViewChange($event.value)"
                    value="list"
                >
                    <img src="../../../../../assets/list-icon.svg" alt="" />
                </mat-button-toggle>
            </mat-button-toggle-group>
        </div>
        <div *ngIf="response.length == 0" class="table-filter">
            <div class="no-data-available">No records found</div>
        </div>
        <div class="data-table-list">
            <table
                class="custom-table"
                *ngIf="response.length > 0"
                [ngClass]="addClass"
            >
                <tbody>
                    <tr
                        class="data-item list-grid"
                        *ngFor="let data of response"
                    >
                        <td class="profile-td">
                            <div class="profile-col">
                                <img
                                    class="avatar"
                                    src="assets/images/avatars/profile.jpg"
                                    alt=""
                                />
                                <div class="profile-details">
                                    <p
                                        class="name patientName"
                                        (click)="setData(data)" matTooltip="view patient"
                                    >
                                        {{ data.first_name }}
                                        {{ data.last_name }}
                                    </p>
                                    <span
                                        >{{ data.gender }}, {{ data.age }}</span
                                    >
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="details-item">
                                <label>Patient ID</label>
                                <p>{{ data.patient_id }}</p>
                            </div>
                        </td>
                        <!-- <td>
                            <div class="details-item">
                                <label>Pulse ({{ units.pulse }})</label>
                                <p>{{ data.pulse }}</p>
                            </div>
                        </td> -->
                        <td>
                            <div class="details-item">
                                <label
                                    >Last Blood Pressure({{
                                        units.last_weight
                                    }})</label
                                >
                                <p *ngIf="data.lastSystolic != null">
                                    {{ data.lastSystolic }}/{{
                                        data.lastDiastolic
                                    }}
                                </p>
                                <p *ngIf="data.lastSystolic == null">N/A</p>
                            </div>
                        </td>
                        <td>
                            <div class="details-item">
                                <label
                                    >Blood Pressure ({{
                                        units.blood_pressure
                                    }})</label
                                >
                                <p *ngIf="data.systolic != 0">
                                    {{ data.systolic }}/{{ data.diastolic }}
                                </p>
                                <p *ngIf="data.systolic == 0">N/A</p>
                            </div>
                        </td>
                        <!-- <td>
                            <div class="details-item">
                                <label>IHB</label>
                                <p>{{ data.lhb }}</p>
                            </div>
                        </td> -->
                        <td>
                            <div class="details-item">
                                <label>Consultation Time</label>
                                <p>{{ data.totalTime }}</p>
                            </div>
                        </td>
                        <td class="data-card-footer">
                            <div class="action-col">
                                <!-- <button
                                    mat-icon-button
                                    class="notification-btn"
                                    matTooltip="Notification"
                                >
                                    <i class="indicator"> </i>
                                    <img
                                        src="../../../../../assets/notification-bell.svg"
                                        alt=""
                                    />
                                </button> -->
                                <div class="view-btn">
                                    <button
                                        class=""
                                        mat-icon-button
                                        matTooltip="view patient"
                                        (click)="setData(data)"
                                    >
                                        <mat-icon>visibility</mat-icon>
                                        <span class="text">View Details</span>
                                    </button>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <mat-paginator
            style="background: #f1f2f8"
            [length]="total"
            [pageSize]="requestParam.pasgesize"
            [pageSizeOptions]="[5, 10, 25, 100]"
            (page)="getServerData($event)"
            aria-label="Select page"
        >
        </mat-paginator>
    </div>
    <!-- <div class="dialog-content-wrapper ">
        <div class="add-patient-modal">
            <div class="modal-header">
                <button class="back-btn">
                    <mat-icon aria-hidden="false" aria-label="Example home icon">chevron_left</mat-icon>
                    Back
                </button>
                <h2>Add a Patient</h2>
                <span class="index"><strong>Step 1</strong>/4</span>
            </div>
        </div>
        <div class="modal-body">
            Step 1 Start 
            <form [formGroup]="firstForm">
                <div class="input-block">
                    <p>Please provide the information below</p>
                    <div class="grid grid-cols-6 ">
                        <div class="col-span-6 sm:col-span-3">
                            <!-- <mat-form-field class="w-full" appearance="fill">
                                <mat-label>Select Specialization</mat-label>
                                <input matInput value="">
                            </mat-form-field> 
                            <mat-form-field class="example-full-width" style="width: 100%;">
                              <mat-label>Specialization &nbsp;<span style="color:red;">*</span></mat-label>
                              <mat-select formControlName="specialization" id="specialization" [errorStateMatcher]="matcher">
                                
                                <mat-option *ngFor="let topping of toppingList" [value]="topping">
                                  <!-- {{name.barname}
                                </mat-option>
                              </mat-select>
                              <mat-error *ngIf="firstForm.get('specialization').hasError('required')">
                                Please Select Cardiology
                              </mat-error>
                            </mat-form-field>
                        </div>
                        <div class="col-span-6 sm:col-span-3">
                            <mat-form-field class="w-full" appearance="fill">
                                <mat-label>Select Doctor</mat-label>
                                <input matInput value="">
                            </mat-form-field>
                        </div>
                    </div>
                </div>
                <div class="input-block">
                    <p>Patient Details</p>
                    <div class="grid grid-cols-6">
                        <div class="col-span-6 sm:col-span-3">
                            <mat-form-field class="w-full" appearance="fill">
                                <mat-label>First Name</mat-label>
                                <input matInput>
                            </mat-form-field>
                        </div>
                        <div class="col-span-6 sm:col-span-3">
                            <mat-form-field class="w-full" appearance="fill">
                                <mat-label>Last Name</mat-label>
                                <input matInput>
                            </mat-form-field>
                        </div>
                        <div class="col-span-6 sm:col-span-3">
                            Date of birth
                            <mat-form-field class="example-full-width" appearance="fill">
                                <mat-label>Choose a date</mat-label>
                                <input matInput [matDatepicker]="picker">
                                <mat-datepicker-toggle matSuffix [for]="picker">
                                    <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                </mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>

                        </div>
                        <div class="col-span-6 sm:col-span-3">
                            <mat-form-field class="w-full" appearance="fill">
                                <mat-label>Email (mat-optional)</mat-label>
                                <input matInput>
                            </mat-form-field>
                        </div>
                        <div class="col-span-6 sm:col-span-3">
                            <mat-form-field class="w-full" appearance="fill">
                                <mat-label>Mobile phone number</mat-label>
                                <input matInput>
                            </mat-form-field>
                        </div>
                        <div class="col-span-6 sm:col-span-3">
                            <mat-form-field class="w-full" appearance="fill">
                                <mat-label>Home phone number (mat-optional)</mat-label>
                                <input matInput>
                            </mat-form-field>
                        </div>
                        <div class="col-span-6">
                            <mat-label>Does patient consent to be contacted?</mat-label>
                            <mat-radio-group [color]="'primary'" aria-label="Select an mat-option">
                                <mat-radio-button value="1">Yes</mat-radio-button>
                                <mat-radio-button value="2">No</mat-radio-button>
                            </mat-radio-group>
                        </div>
                        <div class="col-span-6 sm:col-span-3">
                            <mat-form-field class="w-full" appearance="fill">
                                <mat-label>MRN</mat-label>
                                <input matInput>
                            </mat-form-field>
                        </div>
                        <div class="col-span-6 sm:col-span-3">
                            <mat-form-field class="w-full" appearance="fill">
                                <mat-label>Gender</mat-label>
                                <mat-select>
                                    <mat-option value="volvo">Volvo</mat-option>
                                    <mat-option value="saab">Saab</mat-option>
                                    <mat-option value="mercedes">Mercedes</mat-option>
                                    <mat-option value="audi">Audi</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="col-span-6 sm:col-span-3">
                            <mat-form-field class="w-full" appearance="fill">
                                <mat-label>ICD-10 Code</mat-label>
                                <input matInput>
                            </mat-form-field>
                        </div>
                        <div class="col-span-6 sm:col-span-3">
                            <mat-label>Preferred language</mat-label>
                            <mat-radio-group [color]="'primary'" aria-label="Select an mat-option">
                                <mat-radio-button value="1">English</mat-radio-button>
                                <mat-radio-button value="2">Spanish</mat-radio-button>
                            </mat-radio-group>
                        </div>
                    </div>
                </div> 
                <div class="form-action">
                    <button mat-stroked-button  mat-button mat-dialog-close class="cancel-btn">Cancel</button>
                    <button mat-flat-button color="primary" class="next-btn">
                        Next
                        <mat-icon aria-hidden="false" aria-label="Example home icon">chevron_right</mat-icon>

                    </button>

                </div>
            </form>
            <form [formGroup]="secondForm" (ngSubmit)="onSecondFormSubmit()">
                <div class="input-block">
                    <p>Please provide the information below</p>
                    <div class="grid grid-cols-6 ">
                        <div class="col-span-6 sm:col-span-3">
                            <!-- <mat-form-field class="w-full" appearance="fill">
                                <mat-label>Select Specialization</mat-label>
                                <input matInput value="">
                            </mat-form-field> 
                            <mat-form-field class="example-full-width" style="width: 100%;">
                              <mat-label>Specialization_new &nbsp;<span style="color:red;">*</span></mat-label>
                              <mat-select formControlName="specialization_new" id="specialization_new" [errorStateMatcher]="matcher">
                                
                                <mat-option *ngFor="let topping of toppingList" [value]="topping">
                                  <!-- {{name.barname}} 
                                </mat-option>
                              </mat-select>
                              <mat-error *ngIf="firstForm.get('specialization').hasError('required')">
                                Please Select Cardiology
                              </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                </div>
                <div class="form-action">
                    <button mat-stroked-button  mat-button mat-dialog-close class="cancel-btn">Cancel</button>
                    <button mat-flat-button color="primary" class="next-btn">
                        Next
                        <mat-icon aria-hidden="false" aria-label="Example home icon">chevron_right</mat-icon>

                    </button>

                </div>
            </form>
        </div>
    </div>  -->
</div>

<ng-template #firstFormDialog>
    <div class="dialog-content-wrapper">
        <div class="add-patient-modal">
            <div class="modal-header">
                <button (click)="cancelPopup()" class="back-btn">
                    <mat-icon aria-hidden="false" aria-label="Example home icon"
                        >chevron_left</mat-icon
                    >
                    Back
                </button>
                <h2>Add a Patient</h2>
                <span class="index"><strong>Step 1</strong>/4</span>
            </div>
            <div class="modal-body">
                <p *ngIf="emailError">{{ emailError }}</p>
                <form [formGroup]="firstForm">
                    <div class="input-block">
                        <p>Please provide the information below</p>
                        <div class="grid grid-cols-6">
                            <div class="col-span-6 sm:col-span-3">
                                <!-- <mat-form-field class="w-full" appearance="fill">
                                <mat-label>Select Specialization</mat-label>
                                <input matInput value="">
                            </mat-form-field> -->
                                <mat-form-field
                                    class="example-full-width"
                                    style="width: 100%"
                                >
                                    <mat-label
                                        >Specialization <!-- &nbsp;<span
                                            style="color: red"
                                            >*</span
                                        > --></mat-label
                                    >
                                    <mat-select
                                        formControlName="specialization"
                                        id="specialization"
                                        [errorStateMatcher]="matcher"
                                    >
                                        <mat-option
                                            *ngFor="
                                                let specialization of specializationList
                                            "
                                            [value]="specialization"
                                        >
                                            {{ specialization }}
                                        </mat-option>
                                    </mat-select>
                                    <mat-error
                                        *ngIf="
                                            firstForm
                                                .get('specialization')
                                                .hasError('required')
                                        "
                                    >
                                        Please Select Specialization
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="example-full-width"
                                    style="width: 100%"
                                >
                                    <mat-label
                                        >Select Doctor &nbsp;<span
                                            style="color: red"
                                            >*</span
                                        ></mat-label
                                    >
                                    <mat-select
                                        formControlName="doctor"
                                        id="doctor"
                                        [errorStateMatcher]="matcher"
                                    >
                                        <mat-option
                                            *ngFor="let doctor of doctorsList"
                                            [value]="doctor.id"
                                        >
                                            {{ doctor.name }}
                                        </mat-option>
                                    </mat-select>
                                    <mat-error
                                        *ngIf="
                                            firstForm
                                                .get('doctor')
                                                .hasError('required')
                                        "
                                    >
                                        Please Select Doctor
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                    <div class="input-block">
                        <p>Patient Details</p>
                        <div class="grid grid-cols-6">
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label
                                        >First Name &nbsp;<span
                                            style="color: red"
                                            >*</span
                                        ></mat-label
                                    >
                                    <input
                                        matInput
                                        formControlName="firstName"
                                        id="firstName"
                                        [(ngModel)]="modelFirstName"
                                        [errorStateMatcher]="matcher"
                                        (change)="
                                            removeSpace(
                                                firstForm.value.firstName,
                                                'modelFirstName'
                                            )
                                        "
                                    />
                                    <mat-error
                                        *ngIf="
                                            firstForm
                                                .get('firstName')
                                                .hasError('required')
                                        "
                                    >
                                        Please Enter First Name
                                    </mat-error>
                                    <mat-error
                                        *ngIf="
                                            firstForm
                                                .get('firstName')
                                                .hasError('pattern')
                                        "
                                    >
                                        Please Enter whithout space
                                    </mat-error>
                                    <mat-error
                                        *ngIf="
                                            firstForm
                                                .get('firstName')
                                                .hasError('whitespace')
                                        "
                                        >Please enter valid data</mat-error
                                    >
                                </mat-form-field>
                            </div>
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label
                                        >Last Name &nbsp;<span
                                            style="color: red"
                                            >*</span
                                        ></mat-label
                                    >
                                    <input
                                        matInput
                                        formControlName="lastName"
                                        id="lastName"
                                        [(ngModel)]="modelLastName"
                                        [errorStateMatcher]="matcher"
                                        (change)="
                                            removeSpace(
                                                firstForm.value.lastName,
                                                'modelLastName'
                                            )
                                        "
                                    />
                                    <mat-error
                                        *ngIf="
                                            firstForm
                                                .get('lastName')
                                                .hasError('required')
                                        "
                                    >
                                        Please Enter Last Name
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full date-picker"
                                    appearance="fill"
                                >
                                    <mat-label
                                        >Date Of Birth &nbsp;<span
                                            style="color: red"
                                            >*</span
                                        ></mat-label
                                    >
                                    <input
                                        matInput
                                        [matDatepicker]="picker"
                                        formControlName="dateOfBirth"
                                        id="dateOfBirth"
                                        [min]="oldDate"
                                        [max]="tomorrow"
                                        [errorStateMatcher]="matcher"
                                    />
                                    <mat-datepicker-toggle
                                        matSuffix
                                        [for]="picker"
                                    >
                                        <img
                                            matDatepickerToggleIcon
                                            style="width: 15px"
                                            src="../../../../../assets/calendar.svg"
                                            alt=""
                                        />
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #picker></mat-datepicker>
                                    <mat-error
                                        *ngIf="
                                            firstForm
                                                .get('dateOfBirth')
                                                .hasError('required')
                                        "
                                    >
                                        Please Select Date of Birth
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label
                                        >Email &nbsp;<!-- <span style="color: red"
                                            >*</span
                                        > --></mat-label
                                    >
                                    <input
                                        type="email"
                                        matInput
                                        formControlName="email"
                                        id="email"
                                        [errorStateMatcher]="matcher"
                                    />
                                    <!-- <mat-error
                                        *ngIf="
                                            firstForm
                                                .get('email')
                                                .hasError('required')
                                        "
                                    >
                                        Please Enter the Email
                                    </mat-error> -->
                                    <mat-error
                                        *ngIf="
                                            firstForm
                                                .get('email')
                                                .hasError('pattern')
                                        "
                                    >
                                        Please Enter the Valid Email
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-span-2 sm:col-span-1">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label
                                        >Code <!-- &nbsp;<span
                                            style="color: red"
                                            >*</span
                                        > --></mat-label
                                    >
                                    <input
                                        mask="+0000"
                                        matInput
                                        formControlName="countrycode"
                                        id="countrycode"
                                        [errorStateMatcher]="matcher"
                                    />
                                    <mat-error
                                        *ngIf="
                                            firstForm
                                                .get('countrycode')
                                                .hasError('required')
                                        "
                                    >
                                        Please Enter Country Code
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-span-4 sm:col-span-2">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label
                                        >Mobile phone number &nbsp;<span
                                            style="color: red"
                                            >*</span
                                        ></mat-label
                                    >
                                    <input
                                        mask="(000) 000-0000"
                                        matInput
                                        formControlName="mobileNumber"
                                        id="mobileNumber"
                                        [errorStateMatcher]="matcher"
                                    />
                                    <mat-error
                                        *ngIf="
                                            firstForm
                                                .get('mobileNumber')
                                                .hasError('required')
                                        "
                                    >
                                        Please Enter Mobile Number
                                    </mat-error>
                                    <mat-error
                                        *ngIf="
                                            firstForm
                                                .get('mobileNumber')
                                                .hasError('pattern')
                                        "
                                    >
                                        Please Enter 10 digit Number
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label
                                        >Home phone number &nbsp;<!-- <span
                                            style="color: red"
                                            >*</span
                                        > --></mat-label
                                    >
                                    <input
                                        mask="(000) 000-0000"
                                        matInput
                                        formControlName="homeNumber"
                                        id="homeNumber"
                                        [errorStateMatcher]="matcher"
                                    />
                                    <!-- <mat-error
                                        *ngIf="
                                            firstForm
                                                .get('homeNumber')
                                                .hasError('required')
                                        "
                                    >
                                        Please Enter Home Phone Number
                                    </mat-error> -->
                                    <mat-error
                                        *ngIf="
                                            firstForm
                                                .get('homeNumber')
                                                .hasError('pattern')
                                        "
                                    >
                                        Please Enter 10 digit Number
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-span-6">
                                <mat-label
                                    >Does patient consent to be
                                    contacted?</mat-label
                                >
                                <!-- <mat-radio-group [ngModel]="selectedRadio" [color]="'primary'" aria-label="Select an mat-option" formControlName="patientConsent" id="patientConsent" [errorStateMatcher]="matcher">
                                <mat-radio-button value="1" selected>Yes</mat-radio-button>
                                <mat-radio-button value="0">No</mat-radio-button>
                            </mat-radio-group> -->
                                <mat-radio-group
                                    fxLayout="column"
                                    [color]="'primary'"
                                    aria-label="Select an mat-option"
                                    formControlName="patientConsent"
                                    id="patientConsent"
                                    [errorStateMatcher]="matcher"
                                >
                                    <mat-radio-button
                                        *ngFor="
                                            let patientConsent of patientConsentlist
                                        "
                                        [value]="patientConsent.value"
                                        name="patientConsent.name"
                                        [checked]="patientConsent.checked"
                                        (change)="
                                            radioSelectChange(
                                                patientConsent,
                                                patientConsentlist
                                            )
                                        "
                                        >{{
                                            patientConsent.name
                                        }}</mat-radio-button
                                    >
                                </mat-radio-group>
                            </div>
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label
                                        >MRN &nbsp;<span style="color: red"
                                            >*</span
                                        ></mat-label
                                    >
                                    <input
                                        type="text"
                                        matInput
                                        formControlName="mrn"
                                        id="mrn"
                                        [errorStateMatcher]="matcher"
                                        [(ngModel)]="modelMrn"
                                        (change)="
                                            removeSpace(
                                                firstForm.value.mrn,
                                                'modelMrn'
                                            )
                                        "
                                    />
                                    <mat-error
                                        *ngIf="
                                            firstForm
                                                .get('mrn')
                                                .hasError('required')
                                        "
                                    >
                                        Please Enter MRN
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label
                                        >Gender&nbsp;<span style="color: red"
                                            >*</span
                                        ></mat-label
                                    >
                                    <mat-select
                                        formControlName="gender"
                                        id="gender"
                                        [errorStateMatcher]="matcher"
                                    >
                                        <mat-option value="0">Male</mat-option>
                                        <mat-option value="1"
                                            >Female</mat-option
                                        >
                                    </mat-select>
                                    <mat-error
                                        *ngIf="
                                            firstForm
                                                .get('gender')
                                                .hasError('required')
                                        "
                                    >
                                        Please Select Gender
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label
                                        >ICD Code &nbsp;<span style="color: red"
                                            >*</span
                                        ></mat-label
                                    >
                                    <input
                                        [disabled]="disableDeviceModel"
                                        matInput
                                        type="text"
                                        formControlName="icdcode"
                                        id="icdcode"
                                        [errorStateMatcher]="matcher"
                                        [(ngModel)]="modelIcd"
                                        (change)="
                                            removeSpace(
                                                firstForm.value.icdcode,
                                                'modelIcd'
                                            )
                                        "
                                        value="I10"
                                    />
                                    <!-- <input matInput type="text" name="" formControlName="icdcode" formControlName="icdcode" id="icdcode" [errorStateMatcher]="matcher" value="ICD-10" [(ngModel)]="modelIcd"> -->
                                    <mat-error
                                        *ngIf="
                                            firstForm
                                                .get('icdcode')
                                                .hasError('required')
                                        "
                                    >
                                        Please Enter ICD
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-span-6 sm:col-span-3">
                                <mat-label>Preferred language</mat-label>
                                <mat-radio-group
                                    [color]="'primary'"
                                    aria-label="Select an mat-option"
                                    formControlName="preferredLanguage"
                                    id="preferredLanguage"
                                    [errorStateMatcher]="matcher"
                                >
                                    <!-- <mat-radio-button value="1">English</mat-radio-button>
                                <mat-radio-button value="2">Spanish</mat-radio-button> -->
                                    <mat-radio-button
                                        *ngFor="
                                            let preferredLanguage of preferredLanguageList
                                        "
                                        [value]="preferredLanguage.value"
                                        name="preferredLanguage.name"
                                        [checked]="preferredLanguage.checked"
                                        (change)="
                                            radioSelectChange(
                                                preferredLanguage,
                                                preferredLanguageList
                                            )
                                        "
                                        >{{
                                            preferredLanguage.name
                                        }}</mat-radio-button
                                    >
                                </mat-radio-group>
                            </div>
                        </div>
                    </div>
                    <div class="form-action">
                        <button
                            mat-stroked-button
                            (click)="cancelPopup()"
                            class="cancel-btn"
                        >
                            Cancel
                        </button>
                        <button
                            (click)="onfirstFormSubmit()"
                            mat-flat-button
                            color="primary"
                            class="next-btn"
                        >
                            Next
                            <mat-icon
                                aria-hidden="false"
                                aria-label="Example home icon"
                                >chevron_right</mat-icon
                            >
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #secondFormDialog>
    <div class="dialog-content-wrapper">
        <div class="add-patient-modal">
            <div class="modal-header">
                <button class="back-btn" (click)="back()">
                    <mat-icon aria-hidden="false" aria-label="Example home icon"
                        >chevron_left</mat-icon
                    >
                    Back
                </button>
                <h2>Add a Patient</h2>
                <span class="index"><strong>Step 2</strong>/4</span>
            </div>
            <div class="modal-body">
                <form [formGroup]="secondForm">
                    <div class="input-block">
                        <div class="grid grid-cols-6">
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label>Address Line 1</mat-label>
                                    <input
                                        matInput
                                        type="text"
                                        formControlName="addressline1"
                                        id="addressline1"
                                        [errorStateMatcher]="matcher"
                                        (change)="
                                            removeSpace(
                                                secondForm.value.addressline1,
                                                'modelAddressLine1'
                                            )
                                        "
                                        [(ngModel)]="modelAddressLine1"
                                    />
                                    <mat-error
                                        *ngIf="
                                            secondForm
                                                .get('addressline1')
                                                .hasError('required')
                                        "
                                    >
                                        Please Enter Address Line 1
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label>Address Line 2</mat-label>
                                    <input
                                        matInput
                                        type="text"
                                        formControlName="addressline2"
                                        id="addressline2"
                                        [errorStateMatcher]="matcher"
                                        (change)="
                                            removeSpace(
                                                secondForm.value.addressline2,
                                                'modelAddressLine2'
                                            )
                                        "
                                        [(ngModel)]="modelAddressLine2"
                                    />
                                    <mat-error
                                        *ngIf="
                                            secondForm
                                                .get('addressline2')
                                                .hasError('required')
                                        "
                                    >
                                        Please Enter Address Line 2
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label>City</mat-label>
                                    <input
                                        matInput
                                        type="text"
                                        formControlName="city"
                                        id="city"
                                        [errorStateMatcher]="matcher"
                                        (change)="
                                            removeSpace(
                                                secondForm.value.city,
                                                'modelCity'
                                            )
                                        "
                                        [(ngModel)]="modelCity"
                                    />
                                    <mat-error
                                        *ngIf="
                                            secondForm
                                                .get('city')
                                                .hasError('required')
                                        "
                                    >
                                        Please Enter City
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label>State</mat-label>
                                    <mat-select
                                        formControlName="state"
                                        id="state"
                                        [errorStateMatcher]="matcher"
                                    >
                                        <mat-option
                                            *ngFor="let state of stateList"
                                            [value]="state.id"
                                        >
                                            {{ state.name }}
                                        </mat-option>
                                    </mat-select>
                                    <mat-error
                                        *ngIf="
                                            secondForm
                                                .get('state')
                                                .hasError('required')
                                        "
                                    >
                                        Please Select State
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label>Zip</mat-label>
                                    <input
                                        matInput
                                        type="text"
                                        formControlName="zip"
                                        id="zip"
                                        [errorStateMatcher]="matcher"
                                        (change)="
                                            removeSpace(
                                                secondForm.value.zip,
                                                'modelZip'
                                            )
                                        "
                                        [(ngModel)]="modelZip"
                                    />
                                    <mat-error
                                        *ngIf="
                                            secondForm
                                                .get('zip')
                                                .hasError('required')
                                        "
                                    >
                                        Please Enter Zip
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                        <mat-checkbox
                            formControlName="shippingAddress"
                            [color]="'primary'"
                            (change)="shippingAddressChange($event)"
                            [ngModel]="shippingAddressModel"
                        >
                            Shipping address and Billing address are same.
                        </mat-checkbox>
                        <div
                            class="input-block"
                            *ngIf="shippingAddressModel != true"
                            class="shippingAddress"
                        >
                            <div class="grid grid-cols-6">
                                <div class="col-span-6 sm:col-span-3">
                                    <mat-form-field
                                        class="w-full"
                                        appearance="fill"
                                    >
                                        <mat-label
                                            >Shipping Address Line 1</mat-label
                                        >
                                        <input
                                            matInput
                                            type="text"
                                            formControlName="shippingaddressline1"
                                            id="shippingaddressline1"
                                            [errorStateMatcher]="matcher"
                                            (change)="
                                                removeSpace(
                                                    secondForm.value
                                                        .shippingaddressline1,
                                                    'modelShippingAddressLine1'
                                                )
                                            "
                                            [(ngModel)]="
                                                modelShippingAddressLine1
                                            "
                                        />
                                        <mat-error
                                            *ngIf="
                                                secondForm
                                                    .get('shippingaddressline1')
                                                    .hasError('required')
                                            "
                                        >
                                            Please Enter Shipping Address Line 1
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-span-6 sm:col-span-3">
                                    <mat-form-field
                                        class="w-full"
                                        appearance="fill"
                                    >
                                        <mat-label
                                            >Shipping Address Line 2</mat-label
                                        >
                                        <input
                                            matInput
                                            type="text"
                                            formControlName="shippingaddressline2"
                                            id="shippingaddressline2"
                                            [errorStateMatcher]="matcher"
                                            (change)="
                                                removeSpace(
                                                    secondForm.value
                                                        .shippingaddressline2,
                                                    'modelShippingAddressLine2'
                                                )
                                            "
                                            [(ngModel)]="
                                                modelShippingAddressLine2
                                            "
                                        />
                                        <mat-error
                                            *ngIf="
                                                secondForm
                                                    .get('shippingaddressline2')
                                                    .hasError('required')
                                            "
                                        >
                                            Please Enter Shipping Address Line 2
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-span-6 sm:col-span-3">
                                    <mat-form-field
                                        class="w-full"
                                        appearance="fill"
                                    >
                                        <mat-label>Shipping City</mat-label>
                                        <input
                                            matInput
                                            type="text"
                                            formControlName="shippingcity"
                                            id="city"
                                            [errorStateMatcher]="matcher"
                                            (change)="
                                                removeSpace(
                                                    secondForm.value
                                                        .shippingcity,
                                                    'modelShippingCity'
                                                )
                                            "
                                            [(ngModel)]="modelShippingCity"
                                        />
                                        <mat-error
                                            *ngIf="
                                                secondForm
                                                    .get('shippingcity')
                                                    .hasError('required')
                                            "
                                        >
                                            Please Enter Shipping City
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-span-6 sm:col-span-3">
                                    <mat-form-field
                                        class="w-full"
                                        appearance="fill"
                                    >
                                        <mat-label>Shipping State</mat-label>
                                        <mat-select
                                            formControlName="shippingstate"
                                            id="shippingstate"
                                            [errorStateMatcher]="matcher"
                                        >
                                            <mat-option
                                                *ngFor="let state of stateList"
                                                [value]="state.id"
                                            >
                                                {{ state.name }}
                                            </mat-option>
                                        </mat-select>
                                        <mat-error
                                            *ngIf="
                                                secondForm
                                                    .get('shippingstate')
                                                    .hasError('required')
                                            "
                                        >
                                            Please Select Shipping State
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-span-6 sm:col-span-3">
                                    <mat-form-field
                                        class="w-full"
                                        appearance="fill"
                                    >
                                        <mat-label>Shipping Zip</mat-label>
                                        <input
                                            matInput
                                            type="text"
                                            formControlName="shippingzip"
                                            id="shippingzip"
                                            [errorStateMatcher]="matcher"
                                            (change)="
                                                removeSpace(
                                                    secondForm.value
                                                        .shippingzip,
                                                    'modelShippingZip'
                                                )
                                            "
                                            [(ngModel)]="modelShippingZip"
                                        />
                                        <mat-error
                                            *ngIf="
                                                secondForm
                                                    .get('shippingzip')
                                                    .hasError('required')
                                            "
                                        >
                                            Please Enter Shipping Zip
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-action">
                        <button
                            mat-stroked-button
                            class="cancel-btn"
                            (click)="cancelPopup()"
                        >
                            Cancel
                        </button>
                        <button
                            mat-flat-button
                            color="primary"
                            class="next-btn"
                            (click)="onSecondFormSubmit()"
                        >
                            Next
                            <mat-icon
                                aria-hidden="false"
                                aria-label="Example home icon"
                                >chevron_right</mat-icon
                            >
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</ng-template>
<ng-template #thirdFormDialog>
    <div class="dialog-content-wrapper">
        <div class="add-patient-modal">
            <div class="modal-header">
                <button class="back-btn" (click)="back()">
                    <mat-icon aria-hidden="false" aria-label="Example home icon"
                        >chevron_left</mat-icon
                    >
                    Back
                </button>
                <h2>Add a Patient</h2>
                <span class="index"><strong>Step 3</strong>/4</span>
            </div>
            <div class="modal-body">
                <form [formGroup]="thirdForm">
                    <div class="input-block">
                        <div class="grid grid-cols-6">
                            <div class="col-span-6">
                                <mat-checkbox
                                    [color]="'primary'"
                                    class="mb-3"
                                    formControlName="bloodPressure"
                                    [ngModel]="bloodPressureMonitor"
                                >
                                    Blood Pressure Monitor
                                </mat-checkbox>
                                <mat-error
                                    *ngIf="
                                        thirdForm
                                            .get('bloodPressure')
                                            .hasError('required')
                                    "
                                >
                                    Please select the Blood Pressure Monitor
                                </mat-error>
                                <mat-radio-group
                                    class="w-full custom-radio-field"
                                    [color]="'primary'"
                                    aria-label="Select an mat-option"
                                    formControlName="cuff"
                                    id="cuff"
                                    [errorStateMatcher]="matcher"
                                >
                                    <mat-radio-button
                                        *ngFor="let cuff of cuffList"
                                        [value]="cuff.value"
                                        name="cuff.name"
                                        [checked]="cuff.checked"
                                        (change)="
                                            radioSelectChange(cuff, cuffList)
                                        "
                                        >{{ cuff.name }}
                                        <p>{{ cuff.text }}</p></mat-radio-button
                                    >
                                </mat-radio-group>
                            </div>
                            <div class="col-span-6">
                                <mat-label
                                    >Does the patient have a pacemaker,
                                    implanted defibrillator, or other implanted
                                    metallic or electronic device?</mat-label
                                >
                                <mat-radio-group
                                    class="w-full custom-radio-field"
                                    [color]="'primary'"
                                    aria-label="Select an mat-option"
                                    formControlName="placemacker"
                                    id="placemacker"
                                    [errorStateMatcher]="matcher"
                                >
                                    <mat-radio-button
                                        *ngFor="
                                            let placemacker of placemackerList
                                        "
                                        [value]="placemacker.value"
                                        name="placemacker.name"
                                        [checked]="placemacker.checked"
                                        (change)="
                                            placemackerChange(
                                                placemacker,
                                                placemackerList
                                            )
                                        "
                                        >{{
                                            placemacker.name
                                        }}</mat-radio-button
                                    >
                                </mat-radio-group>
                            </div>
                            <div class="col-span-6">
                                <img
                                    class="alertImage"
                                    src="../../../../assets/icons/Group.svg"
                                />
                                Both hub and BP monitor will be sent
                                <mat-checkbox
                                    [color]="'primary'"
                                    class="mb-3 excludeHub"
                                    formControlName="excludeHub"
                                    [ngModel]="excludeHubChecked"
                                    (change)="excludeChange($event)"
                                >
                                    Exclude Hub
                                </mat-checkbox>
                            </div>
                            <div class="col-span-6" *ngIf="excludeHubChecked">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label>Hub Number</mat-label>
                                    <input
                                        matInput
                                        type="text"
                                        formControlName="excludeHubNumber"
                                        id="excludeHubNumber"
                                        [errorStateMatcher]="matcher"
                                        (change)="
                                            removeSpace(
                                                thirdForm.value
                                                    .excludeHubNumber,
                                                'modelexcludeHubNumber'
                                            )
                                        "
                                        [(ngModel)]="modelexcludeHubNumber"
                                    />
                                    <mat-error
                                        *ngIf="
                                            thirdForm
                                                .get('excludeHubNumber')
                                                .hasError('required')
                                        "
                                    >
                                        Please Enter Hub Number
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <!-- <div class="col-span-6" *ngIf="placemackerselected!=1">
                            <mat-checkbox [color]="'primary'" class="mb-3"  formControlName="weightScale"
                        >
                        Weight Scale
                        </mat-checkbox>
                        <mat-radio-group class="w-full custom-radio-field" [color]="'primary'"  aria-label="Select an mat-option"  formControlName="weightScaleSize" id="weightScaleSize" [errorStateMatcher]="matcher">
                        <mat-radio-button *ngFor="let weightScaleSize of weightScaleSizeList" [value]="weightScaleSize.value" name="weightScaleSize.name" [checked]="weightScaleSize.checked" (change)="radioSelectChange(weightScaleSize,weightScaleSizeList)">{{ weightScaleSize.name}}<p>{{weightScaleSize.text}}</p></mat-radio-button>
                      </mat-radio-group>
                        </div> -->
                        </div>
                    </div>

                    <div class="form-action">
                        <button
                            mat-stroked-button
                            class="cancel-btn"
                            (click)="cancelPopup()"
                        >
                            Cancel
                        </button>
                        <button
                            mat-flat-button
                            color="primary"
                            class="next-btn"
                            (click)="onThirdFormSubmit()"
                        >
                            Next
                            <mat-icon
                                aria-hidden="false"
                                aria-label="Example home icon"
                                >chevron_right</mat-icon
                            >
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</ng-template>
<ng-template #fourthFormDialog>
    <div class="dialog-content-wrapper">
        <div class="add-patient-modal">
            <div class="modal-header">
                <button class="back-btn" (click)="back()">
                    <mat-icon aria-hidden="false" aria-label="Example home icon"
                        >chevron_left</mat-icon
                    >
                    Back
                </button>
                <h2>Add a Patient</h2>
                <span class="index"><strong>Step 4</strong>/4</span>
            </div>
            <div class="modal-body">
                <form [formGroup]="fourthForm">
                    <div class="input-block">
                        <div class="flex justify-between mb-3">
                            <p
                                style="
                                    font-size: 1.125rem;
                                    font-weight: 600;
                                    color: #5e5873;
                                "
                            >
                                Select Threshold
                            </p>

                            <mat-checkbox
                                [color]="'primary'"
                                formControlName="thresholdLater"
                                (change)="thresholdLaterChange($event)"
                            >
                                I will set the threshold later
                            </mat-checkbox>
                        </div>
                    </div>
                    <div
                        class="input-block"
                        *ngIf="thresholdLaterChecked != true"
                    >
                        <p>Blood Pressure Threshold (single reading)</p>
                        <div class="grid grid-cols-6">
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label>Sys high (mmHg)</mat-label>
                                    <input
                                        type="number"
                                        matInput
                                        formControlName="syshigh"
                                        id="syshigh"
                                        [errorStateMatcher]="matcher"
                                        min="0"
                                        max="999"
                                        [(ngModel)]="syshigh"
                                        (input)="
                                            onBpSingleReadingSys(
                                                $event.target.value
                                            )
                                        "
                                    />
                                    <mat-error
                                        *ngIf="
                                            fourthForm
                                                .get('syshigh')
                                                .hasError('max')
                                        "
                                    >
                                        Maximum value should be 999
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label>Sys low (mmHg)</mat-label>
                                    <input
                                        type="number"
                                        matInput
                                        formControlName="syslow"
                                        id="syslow"
                                        [errorStateMatcher]="matcher"
                                        min="0"
                                        max="999"
                                        [(ngModel)]="syslow"
                                        (input)="
                                            onBpSingleReadingSys(
                                                $event.target.value
                                            )
                                        "
                                    />
                                    <mat-error
                                        *ngIf="
                                            fourthForm
                                                .get('syslow')
                                                .hasError('max')
                                        "
                                    >
                                        Maximum value should be 999 and less
                                        then Sys high
                                    </mat-error>
                                </mat-form-field>
                            </div>

                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label>Dia high (mmHg)</mat-label>
                                    <input
                                        type="number"
                                        matInput
                                        formControlName="diahigh"
                                        id="diahigh"
                                        [(ngModel)]="diahigh"
                                        [errorStateMatcher]="matcher"
                                        min="0"
                                        max="999"
                                        (input)="
                                            onBpSingleReadingDia(
                                                $event.target.value
                                            )
                                        "
                                    />
                                    <mat-error
                                        *ngIf="
                                            fourthForm
                                                .get('diahigh')
                                                .hasError('max')
                                        "
                                    >
                                        Maximum value should be 999
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label>Dia low (mmHg)</mat-label>
                                    <input
                                        type="number"
                                        matInput
                                        formControlName="dialow"
                                        id="dialow"
                                        [(ngModel)]="dialow"
                                        [errorStateMatcher]="matcher"
                                        min="0"
                                        max="999"
                                        (input)="
                                            onBpSingleReadingDia(
                                                $event.target.value
                                            )
                                        "
                                    />
                                    <mat-error
                                        *ngIf="
                                            fourthForm
                                                .get('dialow')
                                                .hasError('max')
                                        "
                                    >
                                        Maximum value should be 999 and less
                                        then Dia high
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="flex">
                            <p class="mr-3">
                                Blood Pressure Threshold (average)
                            </p>
                            <mat-checkbox
                                [color]="'primary'"
                                class="mr-7"
                                formControlName="sevendays"
                            >
                                7 Days
                            </mat-checkbox>
                            <mat-checkbox
                                [color]="'primary'"
                                formControlName="tenreadings"
                            >
                                10 Readings
                            </mat-checkbox>
                        </div>
                        <div class="grid grid-cols-6">
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label>Sys high (mmHg)</mat-label>
                                    <input
                                        type="number"
                                        matInput
                                        formControlName="averagesyshigh"
                                        id="averagesyshigh"
                                        [errorStateMatcher]="matcher"
                                        min="0"
                                        max="999"
                                        (input)="
                                            onBpSingleAverageSys(
                                                $event.target.value
                                            )
                                        "
                                        [(ngModel)]="averagesyshigh"
                                    />
                                    <mat-error
                                        *ngIf="
                                            fourthForm
                                                .get('averagesyshigh')
                                                .hasError('max')
                                        "
                                    >
                                        Maximum value should be 999
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label>Sys low (mmHg)</mat-label>
                                    <input
                                        type="number"
                                        matInput
                                        formControlName="averagesyslow"
                                        id="averagesyslow"
                                        [errorStateMatcher]="matcher"
                                        min="0"
                                        max="999"
                                        (input)="
                                            onBpSingleAverageSys(
                                                $event.target.value
                                            )
                                        "
                                        [(ngModel)]="averagesyslow"
                                    />
                                    <mat-error
                                        *ngIf="
                                            fourthForm
                                                .get('averagesyslow')
                                                .hasError('max')
                                        "
                                    >
                                        Maximum value should be 999 and less
                                        then Sys high
                                    </mat-error>
                                </mat-form-field>
                            </div>

                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label>Dia high (mmHg)</mat-label>
                                    <input
                                        type="number"
                                        matInput
                                        formControlName="averagediahigh"
                                        id="averagediahigh"
                                        [errorStateMatcher]="matcher"
                                        min="0"
                                        max="999"
                                        (input)="
                                            onBpSingleAverageDia(
                                                $event.target.value
                                            )
                                        "
                                        [(ngModel)]="averagediahigh"
                                    />
                                    <mat-error
                                        *ngIf="
                                            fourthForm
                                                .get('averagediahigh')
                                                .hasError('max')
                                        "
                                    >
                                        Maximum value should be 999
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label>Dia low (mmHg)</mat-label>
                                    <input
                                        type="number"
                                        matInput
                                        formControlName="averagedialow"
                                        id="averagedialow"
                                        [errorStateMatcher]="matcher"
                                        min="0"
                                        max="999"
                                        (input)="
                                            onBpSingleAverageDia(
                                                $event.target.value
                                            )
                                        "
                                        [(ngModel)]="averagedialow"
                                    />
                                    <mat-error
                                        *ngIf="
                                            fourthForm
                                                .get('averagedialow')
                                                .hasError('max')
                                        "
                                    >
                                        Maximum value should be 999 and less
                                        then Dia high
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                        <!-- </div>
            <div class="input-block"> -->
                        <!-- <p>Weight Gain Threshold</p>
                        <div class="grid grid-cols-6">
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label>24 hr (lbs)</mat-label>
                                    <input
                                        type="number"
                                        matInput
                                        formControlName="twentyfourhr"
                                        id="twentyfourhr"
                                        [errorStateMatcher]="matcher"
                                        min="0"
                                        max="20"
                                        (input)="
                                            onWeightScale($event.target.value)
                                        "
                                        [(ngModel)]="twentyfourhr"
                                    />
                                    <mat-error
                                        *ngIf="
                                            fourthForm
                                                .get('twentyfourhr')
                                                .hasError('max')
                                        "
                                    >
                                        Maximum value should be 20
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-span-6 sm:col-span-3">
                                <mat-form-field
                                    class="w-full"
                                    appearance="fill"
                                >
                                    <mat-label>72 hr (lbs)</mat-label>
                                    <input
                                        type="number"
                                        matInput
                                        formControlName="seventytwohr"
                                        id="seventytwohr"
                                        [errorStateMatcher]="matcher"
                                        min="0"
                                        max="20"
                                        (input)="
                                            onWeightScale($event.target.value)
                                        "
                                        [(ngModel)]="seventytwohr"
                                    />
                                    <mat-error
                                        *ngIf="
                                            fourthForm
                                                .get('seventytwohr')
                                                .hasError('max')
                                        "
                                    >
                                        Maximum value should be 20
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div> -->
                    </div>
                    <div class="form-action">
                        <button
                            mat-stroked-button
                            class="cancel-btn"
                            (click)="cancelPopup()"
                        >
                            Cancel
                        </button>
                        <button
                            mat-flat-button
                            color="primary"
                            class="next-btn"
                            (click)="onFourthFormSubmit()"
                        >
                            View Summary
                            <mat-icon
                                aria-hidden="false"
                                aria-label="Example home icon"
                                >chevron_right</mat-icon
                            >
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #patientSummeryDialog>
    <div class="summary-block">
        <div class="modal-header">
            <h2>Patient Summary</h2>
            <button mat-stroked-button class="edit-btn" (click)="editForm()">
                Edit
            </button>
        </div>
        <div class="modal-body">
            <div class="grid grid-cols-6 gap-6">
                <div class="col-span-3">
                    <label>Patient Name</label>
                    <p>{{ patienName }}</p>
                </div>
                <div class="col-span-3">
                    <label>Date of birth</label>
                    <p>{{ DOB }}</p>
                </div>
                <div class="col-span-3">
                    <label>Email</label>
                    <p>{{ email }}</p>
                </div>
                <div class="col-span-3">
                    <label>Mobile phone number</label>
                    <p>+{{countrycode}} {{ mobileNumber | mask: "(000) 000-0000" }}</p>
                </div>
                <div class="col-span-3">
                    <label>Does patient consent to be contacted?</label>
                    <p>{{ patientConsent }}</p>
                </div>
                <div class="col-span-3">
                    <label>Address</label>
                    <p>{{ address }}</p>
                </div>
                <div class="col-span-3">
                    <label>Gender</label>
                    <p style="text-transform: capitalize">{{ gender }}</p>
                </div>
                <div class="col-span-3">
                    <label>MRN</label>
                    <p>{{ MRN }}</p>
                </div>
                <div class="col-span-3">
                    <label>ICD-10 Code</label>
                    <p>{{ icdcode }}</p>
                </div>
                <div class="col-span-3">
                    <label>Devices</label>
                    <p>Blood Pressure: {{ device_bloob_pressure }}</p>
                    <!-- <p>Weight: {{device_weight}}</p> -->
                </div>
                <div class="col-span-3">
                    <label>Department</label>
                    <p>{{ department }}</p>
                </div>
                <div class="col-span-3">
                    <label>Location</label>
                    <p>{{ location }}</p>
                </div>
                <div class="col-span-6">
                    <img
                        class="alertImage"
                        src="../../../../assets/icons/Group.svg"
                    />
                    By clicking on Add Patient, you are initiating the kitting
                    process
                </div>
            </div>
            <div class="form-action">
                <button
                    mat-stroked-button
                    class="cancel-btn"
                    (click)="cancelPopup()"
                >
                    Cancel
                </button>
                <button
                    mat-flat-button
                    color="primary"
                    class="next-btn"
                    (click)="onAddPatient()"
                >
                    Add Patient
                </button>
            </div>
        </div>
    </div>
</ng-template>
<ng-template #multiplepatientDialog>
    <p>
        Enroll multiple patients by uploading the filled Patient Enrollment
        Sheet. If you do not have the sheet, please
        <a href="../../../../assets/xl/rpm_order_file_sample.xlsx"
            ><b>Click Here</b></a
        >
        to download it and fill the patient details.
    </p>
    <div class="form-action">
        <button mat-stroked-button class="cancel-btn" (click)="cancelPopup()">
            Cancel
        </button>
        <button
            mat-flat-button
            color="primary"
            class="next-btn"
            (click)="triggerImage()"
        >
            Upload File
        </button>
    </div>
</ng-template>
